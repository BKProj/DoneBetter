<html><head><style class="vjs-styles-defaults">
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid {
        padding-top: 56.25%
      }
    </style><style class="vjs-styles-dimensions">
      .video-player-dimensions {
        width: 1920px;
        height: 1062px;
      }

      .video-player-dimensions.vjs-fluid {
        padding-top: 55.3125%;
      }
    </style><script>window["GUARDIO_SENSOR_CONF"] = {"click":true}</script>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<title>Ant Media Server WebRTC/HLS/DASH Player</title>
	<script src="js/fetch.js"></script>
	<script src="js/promise.min.js"></script>
	<script src="js/external/adapter-latest.js"></script>

	<link href="css/player.css" rel="stylesheet">
<script type="text/javascript" src="js/external/video.js"></script><link rel="stylesheet" href="css/external/video-js.css"><style id="lmnt5nzs.55">#smgm_bgdiv{ text-align: center;position:fixed;top:0px;left:0px;z-index:9991;width:100%;height:100%;background-color:black;opacity:0.7;display:block;visibility:visible;}</style><style id="lmo2woth.em7">#smgm_dialogbox { vertical-align:middle;left:40px;top:15px;border:3px solid #000 !important;text-align:center !important;background-color:#fff !important;color:#000 !important;font-family:arial,verdana !important;z-Index:9999;position:fixed;width:18%;height:50%;margin-left:auto;margin-right:auto;display:block;visibility:visible;}</style><style id="lmo1fl36.ogk">.smgm_buttons { color:#000 !important;font: 90% 'arial','trebuchet ms',helvetica,sans-serif !important;background-color:#B2CCFF !important;border:2px solid !important;border-color: #E0EBFF #000 #000 #E0EBFF !important;vertical-align: top !important;}</style><style id="lmo37c2a.wrk">.smgm_table { margin-bottom:10px !important;border:0px !important;border-collapse:collapse !important;margin-left:auto;margin-right:auto; }</style><script type="text/javascript" src="js/external/videojs-contrib-quality-levels.min.js"></script><script type="text/javascript" src="js/external/videojs-hls-quality-selector.min.js"></script></head>

<body>

	<div id="video-overlay" wu3mn7rwa1rjtvcdgao="">
		<img src="images/loading.gif" alt="loading image">
	</div>

	<div id="video_info" wu3mn7rwa1rjtvcdgao="" style="display: none;">
		Stream will start playing automatically<br>when it is live
	</div>

	<!-- HLS Player -->
	<div id="video_container" wu3mn7rwa1rjtvcdgao="" style="display: block;">
		<div preload="auto" class="video-js vjs-default-skin vjs-big-play-centered vjs-controls-enabled vjs-workinghover vjs-v7 vjs-playing vjs-has-started vjs-hls-quality-selector vjs-live vjs-liveui video-player-dimensions vjs-user-inactive" id="video-player" tabindex="-1" role="region" lang="en-us" translate="no" aria-label="Video Player"><video id="video-player_html5_api" class="vjs-tech" preload="auto" tabindex="-1" role="application" muted="muted" src="blob:https://test.antmedia.io/5816ef6e-8a7a-45e6-bf85-6458a6b652f6">
			<p class="vjs-no-js">
				To view this video please enable JavaScript, and consider upgrading
				to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank" class="vjs-hidden" hidden="hidden">supports
					HTML5 video</a>
			</p>
		</video><div class="vjs-poster" tabindex="-1" aria-disabled="false" style="background-image: url(&quot;previews/streamId_BMdmaLnv2.png&quot;);"></div><div class="vjs-text-track-display" translate="yes" aria-live="off" aria-atomic="true"><div style="position: absolute; inset: 0px; margin: 1.5%;"></div></div><div class="vjs-loading-spinner" dir="ltr"><span class="vjs-control-text">Video Player is loading.</span></div><button class="vjs-big-play-button" type="button" title="Play Video" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Play Video</span></button><div class="vjs-control-bar" dir="ltr"><button class="vjs-play-control vjs-control vjs-button vjs-playing" type="button" title="Pause" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Pause</span></button><div class="vjs-volume-panel vjs-control vjs-volume-panel-horizontal"><button class="vjs-mute-control vjs-control vjs-button vjs-vol-0" type="button" title="Unmute" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Unmute</span></button><div class="vjs-volume-control vjs-control vjs-volume-horizontal"><div tabindex="0" class="vjs-volume-bar vjs-slider-bar vjs-slider vjs-slider-horizontal" role="slider" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Volume Level" aria-live="polite" aria-valuetext="0%"><div class="vjs-mouse-display"><div class="vjs-volume-tooltip" aria-hidden="true"></div></div><div class="vjs-volume-level" style="width: 0%;"><span class="vjs-control-text"></span></div></div></div></div><div class="vjs-current-time vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Current TimeÂ&nbsp;</span><span class="vjs-current-time-display" aria-live="off" role="presentation">0:15</span></div><div class="vjs-time-control vjs-time-divider" aria-hidden="true"><div><span>/</span></div></div><div class="vjs-duration vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">DurationÂ&nbsp;</span><span class="vjs-duration-display" aria-live="off" role="presentation">-:-:-</span></div><div class="vjs-progress-control vjs-control"><div tabindex="0" class="vjs-progress-holder vjs-slider vjs-slider-horizontal" role="slider" aria-valuenow="100.00" aria-valuemin="0" aria-valuemax="100" aria-label="Progress Bar" aria-valuetext="0:15 of 0:17"><div class="vjs-load-progress" style="width: 100%;"><span class="vjs-control-text"><span>Loaded</span>: <span class="vjs-control-text-loaded-percentage">100.00%</span></span><div data-start="12.38" data-end="20.99" style="left: 58.98%; width: 41.02%;"></div></div><div class="vjs-mouse-display"><div class="vjs-time-tooltip" aria-hidden="true"></div></div><div class="vjs-play-progress vjs-slider-bar" aria-hidden="true" style="width: 100%;"><div class="vjs-time-tooltip" aria-hidden="true" style="right: -18px;">0:00</div></div></div></div><div class="vjs-live-control vjs-control"><div class="vjs-live-display" aria-live="off"><span class="vjs-control-text">Stream TypeÂ&nbsp;</span>LIVE</div></div><button class="vjs-seek-to-live-control vjs-control vjs-at-live-edge" type="button" title="Seek to live, currently playing live" aria-disabled="true"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Seek to live, currently playing live</span><span class="vjs-seek-to-live-text" aria-hidden="true">LIVE</span></button><div class="vjs-remaining-time vjs-time-control vjs-control"><span class="vjs-control-text" role="presentation">Remaining TimeÂ&nbsp;</span><span aria-hidden="true">-</span><span class="vjs-remaining-time-display" aria-live="off" role="presentation">-:-:-</span></div><div class="vjs-custom-control-spacer vjs-spacer ">Â&nbsp;</div><div class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-control vjs-button vjs-hidden"><div class="vjs-playback-rate-value" id="vjs-playback-rate-value-label-video-player_component_322">1x</div><button class="vjs-playback-rate vjs-menu-button vjs-menu-button-popup vjs-button" type="button" aria-disabled="false" title="Playback Rate" aria-haspopup="true" aria-expanded="false" aria-describedby="vjs-playback-rate-value-label-video-player_component_322"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Playback Rate</span></button><div class="vjs-menu"><ul class="vjs-menu-content" role="menu"></ul></div></div><div class="vjs-chapters-button vjs-menu-button vjs-menu-button-popup vjs-control vjs-button vjs-hidden"><button class="vjs-chapters-button vjs-menu-button vjs-menu-button-popup vjs-button" type="button" aria-disabled="false" title="Chapters" aria-haspopup="true" aria-expanded="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Chapters</span></button><div class="vjs-menu"><ul class="vjs-menu-content" role="menu"><li class="vjs-menu-title" tabindex="-1">Chapters</li></ul></div></div><div class="vjs-descriptions-button vjs-menu-button vjs-menu-button-popup vjs-control vjs-button vjs-hidden"><button class="vjs-descriptions-button vjs-menu-button vjs-menu-button-popup vjs-button" type="button" aria-disabled="false" title="Descriptions" aria-haspopup="true" aria-expanded="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Descriptions</span></button><div class="vjs-menu"><ul class="vjs-menu-content" role="menu"><li class="vjs-menu-item vjs-selected" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="true"><span class="vjs-menu-item-text">descriptions off</span><span class="vjs-control-text" aria-live="polite">, selected</span></li></ul></div></div><div class="vjs-subs-caps-button vjs-menu-button vjs-menu-button-popup vjs-control vjs-button vjs-hidden"><button class="vjs-subs-caps-button vjs-menu-button vjs-menu-button-popup vjs-button" type="button" aria-disabled="false" title="Captions" aria-haspopup="true" aria-expanded="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Captions</span></button><div class="vjs-menu"><ul class="vjs-menu-content" role="menu"><li class="vjs-menu-item vjs-texttrack-settings" tabindex="-1" role="menuitem" aria-disabled="false"><span class="vjs-menu-item-text">captions settings</span><span class="vjs-control-text" aria-live="polite">, opens captions settings dialog</span></li><li class="vjs-menu-item vjs-selected" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="true"><span class="vjs-menu-item-text">captions off</span><span class="vjs-control-text" aria-live="polite">, selected</span></li></ul></div></div><div class="vjs-audio-button vjs-menu-button vjs-menu-button-popup vjs-control vjs-button vjs-hidden"><button class="vjs-audio-button vjs-menu-button vjs-menu-button-popup vjs-button" type="button" aria-disabled="false" title="Audio Track" aria-haspopup="true" aria-expanded="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Audio Track</span></button><div class="vjs-menu"><ul class="vjs-menu-content" role="menu"><li class="vjs-menu-item vjs-selected vjs-main-menu-item" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="true"><span class="vjs-menu-item-text">default</span><span class="vjs-control-text" aria-live="polite">, selected</span></li></ul></div></div><div class="vjs-menu-button vjs-menu-button-popup vjs-control vjs-button vjs-quality-selector vjs-hidden"><button class="vjs-menu-button vjs-menu-button-popup vjs-button" type="button" aria-disabled="false" aria-haspopup="true" aria-expanded="false"><span class="vjs-icon-placeholder" aria-hidden="true">auto</span><span class="vjs-control-text" aria-live="polite"></span></button><div class="vjs-menu"><ul class="vjs-menu-content" role="menu"><li class="vjs-menu-title" tabindex="-1">Quality</li><li class="vjs-menu-item vjs-selected" tabindex="-1" role="menuitemradio" aria-disabled="false" aria-checked="true"><span class="vjs-menu-item-text">Auto</span><span class="vjs-control-text" aria-live="polite">, selected</span></li></ul></div></div><button class="vjs-picture-in-picture-control vjs-control vjs-button" type="button" title="Picture-in-Picture" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Picture-in-Picture</span></button><button class="vjs-fullscreen-control vjs-control vjs-button" type="button" title="Fullscreen" aria-disabled="false"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Fullscreen</span></button></div><div class="vjs-error-display vjs-modal-dialog vjs-hidden " tabindex="-1" aria-describedby="video-player_component_539_description" aria-hidden="true" aria-label="Modal Window" role="dialog"><p class="vjs-modal-dialog-description vjs-control-text" id="video-player_component_539_description">This is a modal window.</p><div class="vjs-modal-dialog-content" role="document"></div></div><div class="vjs-modal-dialog vjs-hidden  vjs-text-track-settings" tabindex="-1" aria-describedby="video-player_component_545_description" aria-hidden="true" aria-label="Caption Settings Dialog" role="dialog"><p class="vjs-modal-dialog-description vjs-control-text" id="video-player_component_545_description">Beginning of dialog window. Escape will cancel and close the window.</p><div class="vjs-modal-dialog-content" role="document"><div class="vjs-track-settings-colors"><fieldset class="vjs-fg-color vjs-track-setting"><legend id="captions-text-legend-video-player_component_545">Text</legend><label id="captions-foreground-color-video-player_component_545" class="vjs-label">Color</label><select aria-labelledby="captions-text-legend-video-player_component_545 captions-foreground-color-video-player_component_545"><option id="captions-foreground-color-video-player_component_545-White" value="#FFF" aria-labelledby="captions-text-legend-video-player_component_545 captions-foreground-color-video-player_component_545 captions-foreground-color-video-player_component_545-White">White</option><option id="captions-foreground-color-video-player_component_545-Black" value="#000" aria-labelledby="captions-text-legend-video-player_component_545 captions-foreground-color-video-player_component_545 captions-foreground-color-video-player_component_545-Black">Black</option><option id="captions-foreground-color-video-player_component_545-Red" value="#F00" aria-labelledby="captions-text-legend-video-player_component_545 captions-foreground-color-video-player_component_545 captions-foreground-color-video-player_component_545-Red">Red</option><option id="captions-foreground-color-video-player_component_545-Green" value="#0F0" aria-labelledby="captions-text-legend-video-player_component_545 captions-foreground-color-video-player_component_545 captions-foreground-color-video-player_component_545-Green">Green</option><option id="captions-foreground-color-video-player_component_545-Blue" value="#00F" aria-labelledby="captions-text-legend-video-player_component_545 captions-foreground-color-video-player_component_545 captions-foreground-color-video-player_component_545-Blue">Blue</option><option id="captions-foreground-color-video-player_component_545-Yellow" value="#FF0" aria-labelledby="captions-text-legend-video-player_component_545 captions-foreground-color-video-player_component_545 captions-foreground-color-video-player_component_545-Yellow">Yellow</option><option id="captions-foreground-color-video-player_component_545-Magenta" value="#F0F" aria-labelledby="captions-text-legend-video-player_component_545 captions-foreground-color-video-player_component_545 captions-foreground-color-video-player_component_545-Magenta">Magenta</option><option id="captions-foreground-color-video-player_component_545-Cyan" value="#0FF" aria-labelledby="captions-text-legend-video-player_component_545 captions-foreground-color-video-player_component_545 captions-foreground-color-video-player_component_545-Cyan">Cyan</option></select><span class="vjs-text-opacity vjs-opacity"><label id="captions-foreground-opacity-video-player_component_545" class="vjs-label">Transparency</label><select aria-labelledby="captions-text-legend-video-player_component_545 captions-foreground-opacity-video-player_component_545"><option id="captions-foreground-opacity-video-player_component_545-Opaque" value="1" aria-labelledby="captions-text-legend-video-player_component_545 captions-foreground-opacity-video-player_component_545 captions-foreground-opacity-video-player_component_545-Opaque">Opaque</option><option id="captions-foreground-opacity-video-player_component_545-SemiTransparent" value="0.5" aria-labelledby="captions-text-legend-video-player_component_545 captions-foreground-opacity-video-player_component_545 captions-foreground-opacity-video-player_component_545-SemiTransparent">Semi-Transparent</option></select></span></fieldset><fieldset class="vjs-bg-color vjs-track-setting"><legend id="captions-background-video-player_component_545">Background</legend><label id="captions-background-color-video-player_component_545" class="vjs-label">Color</label><select aria-labelledby="captions-background-video-player_component_545 captions-background-color-video-player_component_545"><option id="captions-background-color-video-player_component_545-Black" value="#000" aria-labelledby="captions-background-video-player_component_545 captions-background-color-video-player_component_545 captions-background-color-video-player_component_545-Black">Black</option><option id="captions-background-color-video-player_component_545-White" value="#FFF" aria-labelledby="captions-background-video-player_component_545 captions-background-color-video-player_component_545 captions-background-color-video-player_component_545-White">White</option><option id="captions-background-color-video-player_component_545-Red" value="#F00" aria-labelledby="captions-background-video-player_component_545 captions-background-color-video-player_component_545 captions-background-color-video-player_component_545-Red">Red</option><option id="captions-background-color-video-player_component_545-Green" value="#0F0" aria-labelledby="captions-background-video-player_component_545 captions-background-color-video-player_component_545 captions-background-color-video-player_component_545-Green">Green</option><option id="captions-background-color-video-player_component_545-Blue" value="#00F" aria-labelledby="captions-background-video-player_component_545 captions-background-color-video-player_component_545 captions-background-color-video-player_component_545-Blue">Blue</option><option id="captions-background-color-video-player_component_545-Yellow" value="#FF0" aria-labelledby="captions-background-video-player_component_545 captions-background-color-video-player_component_545 captions-background-color-video-player_component_545-Yellow">Yellow</option><option id="captions-background-color-video-player_component_545-Magenta" value="#F0F" aria-labelledby="captions-background-video-player_component_545 captions-background-color-video-player_component_545 captions-background-color-video-player_component_545-Magenta">Magenta</option><option id="captions-background-color-video-player_component_545-Cyan" value="#0FF" aria-labelledby="captions-background-video-player_component_545 captions-background-color-video-player_component_545 captions-background-color-video-player_component_545-Cyan">Cyan</option></select><span class="vjs-bg-opacity vjs-opacity"><label id="captions-background-opacity-video-player_component_545" class="vjs-label">Transparency</label><select aria-labelledby="captions-background-video-player_component_545 captions-background-opacity-video-player_component_545"><option id="captions-background-opacity-video-player_component_545-Opaque" value="1" aria-labelledby="captions-background-video-player_component_545 captions-background-opacity-video-player_component_545 captions-background-opacity-video-player_component_545-Opaque">Opaque</option><option id="captions-background-opacity-video-player_component_545-SemiTransparent" value="0.5" aria-labelledby="captions-background-video-player_component_545 captions-background-opacity-video-player_component_545 captions-background-opacity-video-player_component_545-SemiTransparent">Semi-Transparent</option><option id="captions-background-opacity-video-player_component_545-Transparent" value="0" aria-labelledby="captions-background-video-player_component_545 captions-background-opacity-video-player_component_545 captions-background-opacity-video-player_component_545-Transparent">Transparent</option></select></span></fieldset><fieldset class="vjs-window-color vjs-track-setting"><legend id="captions-window-video-player_component_545">Window</legend><label id="captions-window-color-video-player_component_545" class="vjs-label">Color</label><select aria-labelledby="captions-window-video-player_component_545 captions-window-color-video-player_component_545"><option id="captions-window-color-video-player_component_545-Black" value="#000" aria-labelledby="captions-window-video-player_component_545 captions-window-color-video-player_component_545 captions-window-color-video-player_component_545-Black">Black</option><option id="captions-window-color-video-player_component_545-White" value="#FFF" aria-labelledby="captions-window-video-player_component_545 captions-window-color-video-player_component_545 captions-window-color-video-player_component_545-White">White</option><option id="captions-window-color-video-player_component_545-Red" value="#F00" aria-labelledby="captions-window-video-player_component_545 captions-window-color-video-player_component_545 captions-window-color-video-player_component_545-Red">Red</option><option id="captions-window-color-video-player_component_545-Green" value="#0F0" aria-labelledby="captions-window-video-player_component_545 captions-window-color-video-player_component_545 captions-window-color-video-player_component_545-Green">Green</option><option id="captions-window-color-video-player_component_545-Blue" value="#00F" aria-labelledby="captions-window-video-player_component_545 captions-window-color-video-player_component_545 captions-window-color-video-player_component_545-Blue">Blue</option><option id="captions-window-color-video-player_component_545-Yellow" value="#FF0" aria-labelledby="captions-window-video-player_component_545 captions-window-color-video-player_component_545 captions-window-color-video-player_component_545-Yellow">Yellow</option><option id="captions-window-color-video-player_component_545-Magenta" value="#F0F" aria-labelledby="captions-window-video-player_component_545 captions-window-color-video-player_component_545 captions-window-color-video-player_component_545-Magenta">Magenta</option><option id="captions-window-color-video-player_component_545-Cyan" value="#0FF" aria-labelledby="captions-window-video-player_component_545 captions-window-color-video-player_component_545 captions-window-color-video-player_component_545-Cyan">Cyan</option></select><span class="vjs-window-opacity vjs-opacity"><label id="captions-window-opacity-video-player_component_545" class="vjs-label">Transparency</label><select aria-labelledby="captions-window-video-player_component_545 captions-window-opacity-video-player_component_545"><option id="captions-window-opacity-video-player_component_545-Transparent" value="0" aria-labelledby="captions-window-video-player_component_545 captions-window-opacity-video-player_component_545 captions-window-opacity-video-player_component_545-Transparent">Transparent</option><option id="captions-window-opacity-video-player_component_545-SemiTransparent" value="0.5" aria-labelledby="captions-window-video-player_component_545 captions-window-opacity-video-player_component_545 captions-window-opacity-video-player_component_545-SemiTransparent">Semi-Transparent</option><option id="captions-window-opacity-video-player_component_545-Opaque" value="1" aria-labelledby="captions-window-video-player_component_545 captions-window-opacity-video-player_component_545 captions-window-opacity-video-player_component_545-Opaque">Opaque</option></select></span></fieldset></div><div class="vjs-track-settings-font"><fieldset class="vjs-font-percent vjs-track-setting"><legend id="captions-font-size-video-player_component_545" class="">Font Size</legend><select aria-labelledby="captions-font-size-video-player_component_545"><option id="captions-font-size-video-player_component_545-50" value="0.50" aria-labelledby="captions-font-size-video-player_component_545 captions-font-size-video-player_component_545-50">50%</option><option id="captions-font-size-video-player_component_545-75" value="0.75" aria-labelledby="captions-font-size-video-player_component_545 captions-font-size-video-player_component_545-75">75%</option><option id="captions-font-size-video-player_component_545-100" value="1.00" aria-labelledby="captions-font-size-video-player_component_545 captions-font-size-video-player_component_545-100">100%</option><option id="captions-font-size-video-player_component_545-125" value="1.25" aria-labelledby="captions-font-size-video-player_component_545 captions-font-size-video-player_component_545-125">125%</option><option id="captions-font-size-video-player_component_545-150" value="1.50" aria-labelledby="captions-font-size-video-player_component_545 captions-font-size-video-player_component_545-150">150%</option><option id="captions-font-size-video-player_component_545-175" value="1.75" aria-labelledby="captions-font-size-video-player_component_545 captions-font-size-video-player_component_545-175">175%</option><option id="captions-font-size-video-player_component_545-200" value="2.00" aria-labelledby="captions-font-size-video-player_component_545 captions-font-size-video-player_component_545-200">200%</option><option id="captions-font-size-video-player_component_545-300" value="3.00" aria-labelledby="captions-font-size-video-player_component_545 captions-font-size-video-player_component_545-300">300%</option><option id="captions-font-size-video-player_component_545-400" value="4.00" aria-labelledby="captions-font-size-video-player_component_545 captions-font-size-video-player_component_545-400">400%</option></select></fieldset><fieldset class="vjs-edge-style vjs-track-setting"><legend id="video-player_component_545" class="">Text Edge Style</legend><select aria-labelledby="video-player_component_545"><option id="video-player_component_545-None" value="none" aria-labelledby="video-player_component_545 video-player_component_545-None">None</option><option id="video-player_component_545-Raised" value="raised" aria-labelledby="video-player_component_545 video-player_component_545-Raised">Raised</option><option id="video-player_component_545-Depressed" value="depressed" aria-labelledby="video-player_component_545 video-player_component_545-Depressed">Depressed</option><option id="video-player_component_545-Uniform" value="uniform" aria-labelledby="video-player_component_545 video-player_component_545-Uniform">Uniform</option><option id="video-player_component_545-Dropshadow" value="dropshadow" aria-labelledby="video-player_component_545 video-player_component_545-Dropshadow">Dropshadow</option></select></fieldset><fieldset class="vjs-font-family vjs-track-setting"><legend id="captions-font-family-video-player_component_545" class="">Font Family</legend><select aria-labelledby="captions-font-family-video-player_component_545"><option id="captions-font-family-video-player_component_545-ProportionalSansSerif" value="proportionalSansSerif" aria-labelledby="captions-font-family-video-player_component_545 captions-font-family-video-player_component_545-ProportionalSansSerif">Proportional Sans-Serif</option><option id="captions-font-family-video-player_component_545-MonospaceSansSerif" value="monospaceSansSerif" aria-labelledby="captions-font-family-video-player_component_545 captions-font-family-video-player_component_545-MonospaceSansSerif">Monospace Sans-Serif</option><option id="captions-font-family-video-player_component_545-ProportionalSerif" value="proportionalSerif" aria-labelledby="captions-font-family-video-player_component_545 captions-font-family-video-player_component_545-ProportionalSerif">Proportional Serif</option><option id="captions-font-family-video-player_component_545-MonospaceSerif" value="monospaceSerif" aria-labelledby="captions-font-family-video-player_component_545 captions-font-family-video-player_component_545-MonospaceSerif">Monospace Serif</option><option id="captions-font-family-video-player_component_545-Casual" value="casual" aria-labelledby="captions-font-family-video-player_component_545 captions-font-family-video-player_component_545-Casual">Casual</option><option id="captions-font-family-video-player_component_545-Script" value="script" aria-labelledby="captions-font-family-video-player_component_545 captions-font-family-video-player_component_545-Script">Script</option><option id="captions-font-family-video-player_component_545-SmallCaps" value="small-caps" aria-labelledby="captions-font-family-video-player_component_545 captions-font-family-video-player_component_545-SmallCaps">Small Caps</option></select></fieldset></div><div class="vjs-track-settings-controls"><button type="button" class="vjs-default-button" title="restore all settings to the default values">Reset<span class="vjs-control-text"> restore all settings to the default values</span></button><button type="button" class="vjs-done-button">Done</button></div></div><button class="vjs-close-button vjs-control vjs-button" type="button" aria-disabled="false" title="Close Modal Dialog"><span class="vjs-icon-placeholder" aria-hidden="true"></span><span class="vjs-control-text" aria-live="polite">Close Modal Dialog</span></button><p class="vjs-control-text">End of dialog window.</p></div></div>
	</div>

	<!-- WebRTC Player -->

	<video id="remoteVideo" controls="" playsinline="" wu3mn7rwa1rjtvcdgao="" style="display: none;"></video>

	<!-- 360 player is added dynamically -->
	

	<!--<div id="networkWarning">Your connection isn't fast enough to play this stream!</div>-->
	<img id="play_button" src="images/play.png" onclick="playWebRTCVideo()" style="position: absolute; top: 30px; left: 30px; display: none;" wu3mn7rwa1rjtvcdgao="">


	<!-- Mute/Unmute Video Button -->
	<button onclick="changeVideoMuteStatus()" id="unmuteButton" title="Mute/Unmute Video" wu3mn7rwa1rjtvcdgao="">
		Unmute
	</button>

	<script type="module" wu3mn7rwa1rjtvcdgao="">
		/**
		* This page accepts following arguments. 
		* 1. "id": the stream id to play.It is mandatory
		* 2. "token": the token to play stream. It's mandatory if token security is enabled on server side.
		* 3. "autoplay": To start playing automatically if streams is available. Optional. Default value is true
		* 4. "mute": To start playing with mute if streams is available. Optional. Default value is true
		* 5. "playOrder": the order which technologies is used in playing. Optional. Default value is "webrtc,hls".
		*     possible values are "hls,webrtc","webrtc","hls","vod","dash"
		* 6. "playType": the order which play type is used in playing. Optional. Default value is "mp4,webm".
		*     possible values are "webm,mp4"","mp4","webm","mov"
		* 7. "targetLatency": To define target latency for the DASH player. Optional. Default value is 3.
		* 8. "is360": To play the stream in 360. Default value is false. 
		*/

		import { WebRTCAdaptor } from "./js/webrtc_adaptor.js"
		import { getUrlParameter, isMobile, tryToPlay, tryToVODPlay } from "./js/fetch.stream.js";
		
		var playOrder = getUrlParameter("playOrder");
		if (playOrder == null) {
			playOrder = ["webrtc", "hls"];
		}
		else {
			playOrder = playOrder.split(',');
		}
		//make play order global to let the other module access it
		window.playOrder = playOrder;
		
		var head = document.getElementsByTagName('head')[0];
		if (playOrder.includes("hls") || playOrder.includes("vod")) {
			//include videojs -> js

			var js = document.createElement("script");
			js.type = "text/javascript";
			js.src = "js/external/video.js"; //   js/external/video.js
			head.appendChild(js);

			//include videojs -> css
			var link = document.createElement("link");
			link.rel = "stylesheet";
			link.href = "css/external/video-js.css";
			head.appendChild(link);

			// These files should call after videojs file loaded completely
			js.onload = function() {
				
				var videoJsQualityLevel = document.createElement("script");
				videoJsQualityLevel.type = "text/javascript";
				videoJsQualityLevel.src = "js/external/videojs-contrib-quality-levels.min.js";
				head.appendChild(videoJsQualityLevel);

				var videoJsQualitySelector = document.createElement("script");
				videoJsQualitySelector.type = "text/javascript";
				videoJsQualitySelector.src = "js/external/videojs-hls-quality-selector.min.js";
				head.appendChild(videoJsQualitySelector);

			}

		}

		if (playOrder.includes("dash")) 
		{
			var js = document.createElement("script");
			js.type = "text/javascript";
			js.src = "js/external/dash.all.min.js";
			head.appendChild(js);
		}

		var is360 = getUrlParameter("is360");
		if (is360 == "true") {
			var hlsJS = document.createElement("script");
			hlsJS.type = "text/javascript";
			hlsJS.src = "js/external/hls.js";
			head.appendChild(hlsJS);
			
			var aframeJS = document.createElement("script");
			aframeJS.type = "text/javascript";
			aframeJS.src = "js/external/aframe.min.js";

			aframeJS.onload = function() {
				var aScene = document.createElement("a-scene");
				aScene.innerHTML = "<a-videosphere src=\"#remoteVideo\" rotation=\"0 180 0\" style=\"background-color: antiquewhite\"></a-videosphere>";
				var body = document.getElementsByTagName('body')[0];
				body.appendChild(aScene);
			}
			head.appendChild(aframeJS);
			

			is360 = true;
		}
		else {
			is360 = false;
		}

		window.is360 = is360;
		
		var handleConnectivityCallDateTimeMs = 0;


		var streamId = getUrlParameter("id");
		if (streamId == null) {
			//check name variable for compatibility with older versions
			streamId = getUrlParameter("name");
		}

		var playType = getUrlParameter("playType");
		if (playType == null || playType == "mp4,webm") {
			playType = ["mp4", "webm"];
		}
		else if (playType == "webm,mp4") {
			playType = ["webm", "mp4"];
		}
		else if (playType == "mp4") {
			playType = ["mp4"];
		}
		else if (playType == "webm") {
			playType = ["webm"];
		}
		else if (playType == "mov") {
			playType = ["mov"];
		}

		var token = getUrlParameter("token");
		var pAutoplay = getUrlParameter("autoplay");
		var autoPlay = true;
		if (pAutoplay == "false" || isMobile()) {
			autoPlay = false;
		}
		var mute = getUrlParameter("mute");
		if (mute == "true" || mute == null) {
			mute = true;
		}
		else {
			mute = false;
		}

		var targetLatency = getUrlParameter("targetLatency");
		if (targetLatency == "null") {
			targetLatency = 3;
		}

		var hlsExtension = "m3u8";
		var dashExtension = "mpd";
		var subscriberId = getUrlParameter("subscriberId");
		var subscriberCode = getUrlParameter("subscriberCode");

		var unMuteButton = document.getElementById("unmuteButton");
		var placeHolder = document.getElementById("video_info");
		var player = document.getElementById("remoteVideo");

		var iceConnected = false;


		//This function creates a-scene elements only if is360 parameter is true.
		//This makes a-scene doesn't run in the background if it is not needed.
		function createVrVideo() {
			var vrScene = document.createElement("a-scene");
			vrScene.style.display = "none";
			vrScene.innerHTML = '<a-videosphere src="#remoteVideo" rotation="0 180 0" style="background-color: antiquewhite"></a-videosphere>';
			var remoteVideoNode = document.getElementById("remoteVideo");
			remoteVideoNode.parentNode.insertBefore(vrScene, remoteVideoNode.nextSibling);
		}

		// This function mutes or unmutes the 360 video stream.
		// This is necessary because the browser doesn't allow videos to be played automatically and unmuted by default.
		// Exceptions are possible: https://developers.google.com/web/updates/2017/09/autoplay-policy-changes
		function changeVideoMuteStatus() {
			// Checks the current "mute" status of the video
			if (player.muted) {
				// Unmute the video and change the button's text
				player.muted = false;
				document.getElementById("unmuteButton").innerText = "Mute";
			}
			else {
				player.muted = true;
				document.getElementById("unmuteButton").innerText = "Unmute";
			}
		}

		var webRTCAdaptor = null;
		var streamsFolder = "streams";

		function genericCallback(currentTech) {

			placeHolder.innerHTML = "Stream will start playing automatically<br/>when it is live";
			setTimeout(function () {
				var index = playOrder.indexOf(currentTech);

				if (currentTech == "webrtc") {
					if (!iceConnected) {
						if (index == -1 || index == (playOrder.length - 1)) {
							index = 0;
						}
						else {
							index++;
						}
					}
				}
				else {
					if (index == -1 || index == (playOrder.length - 1)) {
						index = 0;
					}
					else {
						index++;
					}
				}

				var tech = playOrder[index];

				if (tech == "webrtc") {
					// It means there is no HLS stream, so try to play WebRTC stream
					if (webRTCAdaptor == null) {
						initializeWebRTCPlayer(streamId, token, webrtcNoStreamCallback);
					}
					else {
						webRTCAdaptor.getStreamInfo(streamId);
					}
				}
				else if (tech == "hls") {
					tryToPlay(streamId, token, hlsExtension, subscriberId, subscriberCode, hlsNoStreamCallback);
				}
				else if (tech == "dash") {
					var dashFile = streamId + "/" + streamId;
					tryToPlay(dashFile, token, dashExtension, subscriberId, subscriberCode, dashNoStreamCallback);
				}
			}, 3000);
		}

		function webrtcNoStreamCallback() {
			/**
		 * If HLS is in the play order then try to play HLS, if not wait for WebRTC stream
		 * In some cases user may want to remove HLS from the order and force to play WebRTC only
		 * in these cases player only waits for WebRTC streams
		 */
			genericCallback("webrtc");
		}

		function hlsNoStreamCallback() {
			genericCallback("hls");
		}

		function vodNoStreamCallback() {
			placeHolder.innerHTML = "Stream will start playing automatically<br/>when it is live";
			setTimeout(function () {
				if (playOrder.includes("vod")) {
					tryToVODPlay(streamId, token, subscriberId, subscriberCode, vodNoStreamCallback, playType);
				}
			}, 3000);

		}

		function dashNoStreamCallback() {
			genericCallback("dash");
		}

		function setHLSElementsVisibility(show) {
			document.getElementById("video_container").style.display = show == true ? "block" : "none";
		}

		function hideWebRTCElements() {
			setWebRTCElementsVisibility(false);
			document.getElementById("play_button").style.display = "none";
		}

		function setWebRTCElementsVisibility(show) {
			document.getElementById("remoteVideo").style.display = show == true ? "block" : "none";
		}

		function setPlaceHolderVisibility(show) {
			placeHolder.style.display = show == true ? "block" : "none";
		}

		function show360ElementsVisibility() {
			unMuteButton.style.display = "block";
		}

		function playWebRTCVideo() {
			setWebRTCElementsVisibility(true);

			if (is360) {
				unMuteButton.style.display = "block";
			}

			if (mute) {
				document.getElementById("remoteVideo").muted = true;
				unMuteButton.innerText = "Unmute";
			}
			else {
				document.getElementById("remoteVideo").muted = false;
				unMuteButton.innerText = "Mute";
			}
			if (autoPlay) {
				document.getElementById("remoteVideo").play().then(function (value) {
					//autoplay started
					document.getElementById("play_button").style.display = "none";

				}).catch(function (error) {
					document.getElementById("play_button").style.display = "block";
					console.log("User interaction needed to start playing");
				});
			}
		}


		function initializePlayer(streamId, extension, token, subscriberId, subscriberCode) {
			hideWebRTCElements();
			startPlayer(streamId, extension, token, subscriberId, subscriberCode)
		}

		window.initializePlayer = initializePlayer
		window.playWebRTCVideo = playWebRTCVideo
		window.changeVideoMuteStatus = changeVideoMuteStatus

		function startPlayer(streamId, extension, token, subscriberId, subscriberCode) {

			var errorCalled = false;
			var type;
			var liveStream = false;
			if (extension == "mp4") {
				type = "video/mp4";
				liveStream = false;
			}
			else if (extension == "webm") {
				type = "video/webm";
				liveStream = false;
			}
			else if (extension == "mov") {
				type = "video/mp4";
				alert("Browsers do not support to play mov format");
				liveStream = false;
			}
			else if (extension == "avi") {
				type = "video/mp4";
				alert("Browsers do not support to play avi format");
				liveStream = false;
			}
			else if (extension == "m3u8") {
				type = "application/x-mpegURL";
				liveStream = true;
			}
			else if (extension == "mpd") {
				type = "application/dash+xml";
				liveStream = true;
			}
			else {
				console.log("Unknown extension: " + extension);
				return;
			}

			var preview = streamId;
			if (streamId.endsWith("_adaptive")) {
				preview = streamId.substring(0, streamId.indexOf("_adaptive"));
			}

			var player = document.getElementById('remoteVideo');

			if (!is360) {
				// If it's not dash, play with videojs
				if (extension != dashExtension) {

					player = videojs('video-player', {
						poster: "previews/" + preview + ".png",
						liveui: true,
						liveTracker: {
							trackingThreshold: 0
						},
						html5: {
    					vhs: {
      							limitRenditionByPlayerDimensions: false
    						}
    					}
					});

					player.on('error', function (e) {
					    console.log("There is an error with chunks");
					    // We need to add this kind of check. If we don't add this kind of checkpoint, it will create an infinite loop
					    if(!errorCalled){
					     	setTimeout(() => {
					    		errorCalled = true;
 								tryToPlay(streamId, token, extension, subscriberId, subscriberCode, hlsNoStreamCallback);
							}, 2500)
						}
    				})

					videojs.Hls.xhr.beforeRequest = function (options) {
						options.uri = options.uri + "?token=" + token + "&subscriberId=" + subscriberId + "&subscriberCode=" + subscriberCode;
						return options;
					};

					player.src({
						src: "streams/" + streamId + "." + extension,
						type: type,
						withCredentials: true,
					});
			

					player.poster("previews/" + preview + ".png");

					if (mute) {
						player.muted(true);
					}
					else {
						player.muted(false);
					}

					if (autoPlay) {
						player.ready(function () {
							// If it's already added to player, no need to add again
							if(typeof player.hlsQualitySelector === "function"){
								player.hlsQualitySelector({
          							displayCurrentQuality: true,
      							});
							}

							// If there is no adaptive option in m3u8 no need to show quality selector
      						let qualityLevels = player.qualityLevels();
							qualityLevels.on('addqualitylevel', function (event) {
							let qualityLevel = event.qualityLevel;
							if (qualityLevel.height) {
								qualityLevel.enabled = true;
							} else {
								qualityLevels.removeQualityLevel(qualityLevel);
								qualityLevel.enabled = false;
							}
							});

							player.play();
						});
					}
				}
				else {
					player = dashjs.MediaPlayer().create();

					player.updateSettings({ 'streaming': { 'lowLatencyEnabled': true } });

					player.updateSettings({
						'streaming': {
							'liveDelay': targetLatency,
							'liveCatchUpMinDrift': 0.05,
							'liveCatchUpPlaybackRate': 0.5,
							"liveCatchupLatencyThreshold": 30,
						}
					});

					player.initialize(document.querySelector("#video-player"), "streams/" + streamId + "." + extension + "?token=" + token, false);

					if (mute) {
						player.setMute(true);
					}
					else {
						player.setMute(false);
					}

					if (autoPlay && player.isReady()) {
						player.play();
					}

					setInterval(function () {
						console.log("live latency: " + player.getCurrentLiveLatency());
					}, 2000);
				}
			}
			else {
				show360ElementsVisibility();
				if (extension == hlsExtension) {

					// We need to call again due to creating 360 video elements
					player = document.getElementById('remoteVideo');

					if (mute) {
						player.muted = true;
					}
					else {
						player.muted = false;
					}

					var hls = new Hls({
						debug: false
					});

					hls.loadSource("streams/" + streamId + "." + extension + "?token=" + token + "&subscriberId=" + subscriberId + "&subscriberCode=" + subscriberCode);
					hls.attachMedia(player);
					hls.on(Hls.Events.MEDIA_ATTACHED, function () {
						player.play();
					});

					hls.on(Hls.Events.ERROR, function (event, data) {
						if (data.fatal) {
							console.log("There is an error with chunks");
							tryToPlay(streamId, token, extension, subscriberId, subscriberCode, hlsNoStreamCallback);
						}
					});
				}
				else {
					// We need to call again due to creating 360 video elements
					player = document.getElementById('remoteVideo');

					player.src = "streams/" + streamId + "." + extension + "?token=" + token + "&subscriberId=" + subscriberId + "&subscriberCode=" + subscriberCode;

					if (mute) {
						player.muted = true;
					}
					else {
						player.muted = false;
					}

					if (autoPlay) {
						player.play();
					}
				}

				if (autoPlay) {
					document.getElementById("remoteVideo").play().then(function (value) {
						//autoplay started
						document.getElementById("play_button").style.display = "none";
						unMuteButton.innerText = "Unmute";
					}).catch(function (error) {
						unMuteButton.innerText = "Mute";
						document.getElementById("play_button").style.display = "block";
						console.log("User interaction needed to start playing");
					});
				}
			}


			if (!is360) {
				setHLSElementsVisibility(true);
				setWebRTCElementsVisibility(false);
				if (typeof player.ready != "undefined") {
					player.ready(function () {
						var player = this;
						player.on('ended', function () {
							console.log("is360: " + is360 + " Playing has been finished");
							hideWebRTCElements();
							setHLSElementsVisibility(false);
							setPlaceHolderVisibility(true);
							tryToPlay(streamId, token, extension, subscriberId, subscriberCode, hlsNoStreamCallback);
						});
					});
				}

			}
			else if (is360) {
				setHLSElementsVisibility(false);
				player.addEventListener("ended", (e) => {
					console.log("is360: " + is360 + " Playing has been finished");
					hideWebRTCElements();
					setHLSElementsVisibility(false);
					setPlaceHolderVisibility(true);
					tryToPlay(streamId, token, extension, subscriberId, subscriberCode, hlsNoStreamCallback);
				});
				setWebRTCElementsVisibility(true);
			}
			else {
				console.log("player ready is not available. List playing may not be continous");
			}
			setPlaceHolderVisibility(false);
		}
		
		function handleWebRTCConnectivity(noStreamCallback) 
		{
			var currentTimeMs = (new Date()).getTime();
			//call if it's more than 3 seconds older
			if (currentTimeMs >  (handleConnectivityCallDateTimeMs + 3000)) 
			{
				handleConnectivityCallDateTimeMs = currentTimeMs;
				if (iceConnected) 
				{
					//webrtc connection was successful and try to play again with webrtc
					setTimeout(function () {
						webRTCAdaptor.getStreamInfo(streamId);
					}, 3000);
					console.log("Trying to play with webrtc again");
				}
				else 
				{
					//webrtc connection was not succesfull, switch the next play type(playOrder) if available 
					if (typeof noStreamCallback != "undefined") {
						noStreamCallback();
						console.log("Trying to play with other tech than webrtc if available");
					}
				}
				//make the flag false to try other technologies
				iceConnected = false;		
			}
		}


		function initializeWebRTCPlayer(streamId, token, subscriberId, subscriberCode, noStreamCallback) {

			if (is360) {
				show360ElementsVisibility();
			}
			setHLSElementsVisibility(false);

			var pc_config = {
				'iceServers': [{
					'urls': 'stun:stun1.l.google.com:19302'
				}]
			};


			var sdpConstraints = {
				OfferToReceiveAudio: true,
				OfferToReceiveVideo: true

			};
			var mediaConstraints = {
				video: false,
				audio: false
			};

			var appName = location.pathname.substring(0, location.pathname.lastIndexOf("/") + 1);
			var path = location.hostname + ":" + location.port + appName + "websocket";
			var websocketURL = "ws://" + path;

			if (location.protocol.startsWith("https")) {
				websocketURL = "wss://" + path;
			}

			iceConnected = false;

			//webRTCAdaptor is a global variable
			webRTCAdaptor = new WebRTCAdaptor({
				websocket_url: websocketURL,
				mediaConstraints: mediaConstraints,
				peerconnection_config: pc_config,
				sdp_constraints: sdpConstraints,
				remoteVideoId: "remoteVideo",
				isPlayMode: true,
				debug: true,
				callback: function (info, description) {
					if (info == "initialized") {
						console.log("initialized");
						iceConnected = false;
						webRTCAdaptor.getStreamInfo(streamId);
					}
					else if (info == "streamInformation") {
						console.log("stream information");
						webRTCAdaptor.play(streamId, token, "",[] ,subscriberId, subscriberCode);
					}
					else if (info == "play_started") {
						//joined the stream
						console.log("play started");
						setPlaceHolderVisibility(false);
						setHLSElementsVisibility(false);
						playWebRTCVideo();
					} else if (info == "play_finished") {
						//leaved the stream
						console.log("play finished");
						setHLSElementsVisibility(false);
						hideWebRTCElements();
						setPlaceHolderVisibility(true);
						//if play_finished event is received, it has two meanings
						//1. stream is really finished 
						//2. ice connection cannot be established and server reports play_finished event
						//check that publish may start again
						//below method handle the cases above
						handleWebRTCConnectivity(noStreamCallback);
					}
					else if (info == "closed") 
					{
						setHLSElementsVisibility(false);
						hideWebRTCElements();
						setPlaceHolderVisibility(true);
						
						console.log("Websocket connecton closed: " + (typeof description != "undefined" ? 
									JSON.stringify(description) : ""));
						
						handleWebRTCConnectivity(noStreamCallback);	

						
					}
					else if (info == "bitrateMeasurement") {

						if (!document.getElementById("remoteVideo").paused) {
							document.getElementById("play_button").style.display = "none";
						}

						console.debug(description);
						if (description.audioBitrate + description.videoBitrate > description.targetBitrate) {
							document.getElementById("networkWarning").style.display = "block";
							setTimeout(function () {
								document.getElementById("networkWarning").style.display = "none";
							}, 3000);
						}
					}
					else if (info == "ice_connection_state_changed") {
						console.debug("ice connection state changed to " + description.state);
						if (description.state == "connected" || description.state == "completed") {
							//it means the ice connection has been established
							iceConnected = true;
						}
					}
					else if (info == "resolutionChangeInfo") {
						console.log("Resolution is changed to " + description["streamHeight"]);
						let getVideo = document.getElementById("remoteVideo");
						let overlay = document.getElementById('video-overlay');
						getVideo.pause();
						overlay.style.display = "block";
						setTimeout(function () { getVideo.play(); overlay.style.display = "none"; }, 2000);
					}
					else if (info == "server_will_close") {
						console.log("Server will close soon");	
					}

				},
				callbackError: function (error) {
					//some of the possible errors, NotFoundError, SecurityError,PermissionDeniedError

					console.log("error callback: " + JSON.stringify(error));

					if (error == "no_stream_exist" || error == "WebSocketNotConnected" 
							|| error == "not_initialized_yet" || error == "data_store_not_available") 
					{
						handleWebRTCConnectivity(noStreamCallback);
					}
					if (error == "notSetRemoteDescription") {
						/*
						* If getting codec incompatible or remote description error, it will redirect HLS player.
						*/
						tryToPlay(streamId, token, hlsExtension, subscriberId, subscriberCode, hlsNoStreamCallback);
					}
					
				}
			});
		}

		function main() {

			if (typeof streamId != "undefined") {

				if (streamId.startsWith(streamsFolder)) {
					/*
					* If streamId starts with streams, it's hls or mp4 file to be played
					*/
					var lastIndexOfDot = streamId.lastIndexOf(".")
					var streamPath = streamId.substring(streamsFolder.length + 1, lastIndexOfDot);
					var extension = streamId.substring(lastIndexOfDot + 1);
					initializePlayer(streamPath, extension, token);
				}
				else {
					/*
					 * Check that which one is in the first order
					*/
					if (playOrder[0] == "webrtc") {
						initializeWebRTCPlayer(streamId, token, subscriberId, subscriberCode, webrtcNoStreamCallback);
					}
					else if (playOrder[0] == "hls") {
						tryToPlay(streamId, token, hlsExtension, subscriberId, subscriberCode, hlsNoStreamCallback);
					}
					else if (playOrder[0] == "vod") {
						tryToVODPlay(streamId, token, subscriberId, subscriberCode, vodNoStreamCallback, playType);
					}
					else if (playOrder[0] == "dash") {
						tryToPlay(streamId, token, dashExtension, subscriberId, subscriberCode, dashNoStreamCallback);
					}
					else {
						alert("Unsupported play order requested. Supported formats are webrtc and hls. Use something like playOrder=webrtc,hls");
					}
				}
			}
			else {
				alert("No stream specified. Please add ?id={STREAM_ID}  to the url");
			}
		}

		window.addEventListener('load', function() {
			//run main method after everything is loaded
    		main();
		});
		
	</script>




<div id="myM3u8LayerId" wu3mn7rwa1rjtvcdgao="">
        <div style="position:fixed;font-size:16px;word-break:break-all;margin:10px;
                top:1px;left:4px;z-index:900;background-color:lightgray;padding:4px;
                border:4px solid cadetblue;color:green;width:97%;">
            m3u8 Sniffer[11]:
            <a target="_blank" href="https://test.antmedia.io/WebRTCAppEE/streams/streamId_BMdmaLnv2.m3u8?token=undefined&amp;subscriberId=undefined&amp;subscriberCode=undefined?token=undefined&amp;subscriberId=undefined&amp;subscriberCode=undefined" title="Click or right click to open the m3u8 URL">
                <span id="myM3u8DivId">https://test.antmedia.io/WebRTCAppEE/streams/streamId_BMdmaLnv2.m3u8?token=undefined&amp;subscriberId=undefined&amp;subscriberCode=undefined?token=undefined&amp;subscriberId=undefined&amp;subscriberCode=undefined</span>
            </a>&nbsp;
            <span id="m3u8CloseButtonId" style="color:white;font-size:14px;user-select:none;
                    background-color:darkolivegreen;border-radius:4px;
                    padding:2px 2px 2px 2px;float:right;margin-right:4px;" onmouseover="this.style.background='red';" onmouseout="this.style.background='darkolivegreen';" title="Close the m3u8 overlay for this page">
                &nbsp;X&nbsp;
            </span>
            <span id="m3u8CopyButtonId" style="color:white;cursor:pointer;font-size:14px;user-select:none;
                    background-color:darkolivegreen;border-radius:4px;
                    padding:2px 2px 2px 2px;float:right;margin-right:4px;" title="Copy the m3u8 URL to the clipboard">
                &nbsp;Copy&nbsp;
            </span>
        </div>
    </div></body></html>
